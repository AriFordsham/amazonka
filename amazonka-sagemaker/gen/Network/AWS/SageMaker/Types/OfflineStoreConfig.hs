{-# LANGUAGE DeriveDataTypeable #-}
{-# LANGUAGE DeriveGeneric #-}
{-# LANGUAGE OverloadedStrings #-}
{-# LANGUAGE RecordWildCards #-}
{-# OPTIONS_GHC -fno-warn-unused-imports #-}

-- Derived from AWS service descriptions, licensed under Apache 2.0.

-- |
-- Module      : Network.AWS.SageMaker.Types.OfflineStoreConfig
-- Copyright   : (c) 2013-2021 Brendan Hay
-- License     : Mozilla Public License, v. 2.0.
-- Maintainer  : Brendan Hay <brendan.g.hay+amazonka@gmail.com>
-- Stability   : auto-generated
-- Portability : non-portable (GHC extensions)
module Network.AWS.SageMaker.Types.OfflineStoreConfig where

import Network.AWS.Lens
import Network.AWS.Prelude
import Network.AWS.SageMaker.Types.DataCatalogConfig
import Network.AWS.SageMaker.Types.S3StorageConfig

-- | The configuration of an @OfflineStore@ .
--
--
-- Provide an @OfflineStoreConfig@ in a request to @CreateFeatureGroup@ to create an @OfflineStore@ .
--
-- To encrypt an @OfflineStore@ using at rest data encryption, specify AWS Key Management Service (KMS) key ID, or @KMSKeyId@ , in @S3StorageConfig@ .
--
--
-- /See:/ 'offlineStoreConfig' smart constructor.
data OfflineStoreConfig = OfflineStoreConfig'
  { _oscDisableGlueTableCreation ::
      !(Maybe Bool),
    _oscDataCatalogConfig ::
      !(Maybe DataCatalogConfig),
    _oscS3StorageConfig ::
      !S3StorageConfig
  }
  deriving (Eq, Read, Show, Data, Typeable, Generic)

-- | Creates a value of 'OfflineStoreConfig' with the minimum fields required to make a request.
--
-- Use one of the following lenses to modify other fields as desired:
--
-- * 'oscDisableGlueTableCreation' - Set to @True@ to disable the automatic creation of an AWS Glue table when configuring an @OfflineStore@ .
--
-- * 'oscDataCatalogConfig' - The meta data of the Glue table that is autogenerated when an @OfflineStore@ is created.
--
-- * 'oscS3StorageConfig' - The Amazon Simple Storage (Amazon S3) location of @OfflineStore@ .
offlineStoreConfig ::
  -- | 'oscS3StorageConfig'
  S3StorageConfig ->
  OfflineStoreConfig
offlineStoreConfig pS3StorageConfig_ =
  OfflineStoreConfig'
    { _oscDisableGlueTableCreation =
        Nothing,
      _oscDataCatalogConfig = Nothing,
      _oscS3StorageConfig = pS3StorageConfig_
    }

-- | Set to @True@ to disable the automatic creation of an AWS Glue table when configuring an @OfflineStore@ .
oscDisableGlueTableCreation :: Lens' OfflineStoreConfig (Maybe Bool)
oscDisableGlueTableCreation = lens _oscDisableGlueTableCreation (\s a -> s {_oscDisableGlueTableCreation = a})

-- | The meta data of the Glue table that is autogenerated when an @OfflineStore@ is created.
oscDataCatalogConfig :: Lens' OfflineStoreConfig (Maybe DataCatalogConfig)
oscDataCatalogConfig = lens _oscDataCatalogConfig (\s a -> s {_oscDataCatalogConfig = a})

-- | The Amazon Simple Storage (Amazon S3) location of @OfflineStore@ .
oscS3StorageConfig :: Lens' OfflineStoreConfig S3StorageConfig
oscS3StorageConfig = lens _oscS3StorageConfig (\s a -> s {_oscS3StorageConfig = a})

instance FromJSON OfflineStoreConfig where
  parseJSON =
    withObject
      "OfflineStoreConfig"
      ( \x ->
          OfflineStoreConfig'
            <$> (x .:? "DisableGlueTableCreation")
            <*> (x .:? "DataCatalogConfig")
            <*> (x .: "S3StorageConfig")
      )

instance Hashable OfflineStoreConfig

instance NFData OfflineStoreConfig

instance ToJSON OfflineStoreConfig where
  toJSON OfflineStoreConfig' {..} =
    object
      ( catMaybes
          [ ("DisableGlueTableCreation" .=)
              <$> _oscDisableGlueTableCreation,
            ("DataCatalogConfig" .=) <$> _oscDataCatalogConfig,
            Just ("S3StorageConfig" .= _oscS3StorageConfig)
          ]
      )
