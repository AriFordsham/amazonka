{-# OPTIONS_GHC -fno-warn-deprecations #-}
{-# OPTIONS_GHC -fno-warn-unused-binds #-}
{-# OPTIONS_GHC -fno-warn-unused-imports #-}
{-# OPTIONS_GHC -fno-warn-unused-matches #-}

-- Derived from AWS service descriptions, licensed under Apache 2.0.

-- |
-- Module      : Network.AWS.Support.DescribeAttachment
-- Copyright   : (c) 2013-2020 Brendan Hay
-- License     : Mozilla Public License, v. 2.0.
-- Maintainer  : Brendan Hay <brendan.g.hay+amazonka@gmail.com>
-- Stability   : auto-generated
-- Portability : non-portable (GHC extensions)
--
-- Returns the attachment that has the specified ID. Attachments can include screenshots, error logs, or other files that describe your issue. Attachment IDs are generated by the case management system when you add an attachment to a case or case communication. Attachment IDs are returned in the 'AttachmentDetails' objects that are returned by the 'DescribeCommunications' operation.
module Network.AWS.Support.DescribeAttachment
  ( -- * Creating a request
    DescribeAttachment (..),
    mkDescribeAttachment,

    -- ** Request lenses
    daAttachmentId,

    -- * Destructuring the response
    DescribeAttachmentResponse (..),
    mkDescribeAttachmentResponse,

    -- ** Response lenses
    darrsAttachment,
    darrsResponseStatus,
  )
where

import qualified Network.AWS.Lens as Lens
import qualified Network.AWS.Prelude as Core
import qualified Network.AWS.Request as Request
import qualified Network.AWS.Response as Response
import qualified Network.AWS.Support.Types as Types

-- | /See:/ 'mkDescribeAttachment' smart constructor.
newtype DescribeAttachment = DescribeAttachment'
  { -- | The ID of the attachment to return. Attachment IDs are returned by the 'DescribeCommunications' operation.
    attachmentId :: Types.AttachmentId
  }
  deriving stock (Core.Eq, Core.Ord, Core.Read, Core.Show, Core.Generic)
  deriving newtype (Core.Hashable, Core.NFData)

-- | Creates a 'DescribeAttachment' value with any optional fields omitted.
mkDescribeAttachment ::
  -- | 'attachmentId'
  Types.AttachmentId ->
  DescribeAttachment
mkDescribeAttachment attachmentId =
  DescribeAttachment' {attachmentId}

-- | The ID of the attachment to return. Attachment IDs are returned by the 'DescribeCommunications' operation.
--
-- /Note:/ Consider using 'attachmentId' with <https://hackage.haskell.org/package/generic-lens generic-lens> or <https://hackage.haskell.org/package/generic-optics generic-optics> instead.
daAttachmentId :: Lens.Lens' DescribeAttachment Types.AttachmentId
daAttachmentId = Lens.field @"attachmentId"
{-# DEPRECATED daAttachmentId "Use generic-lens or generic-optics with 'attachmentId' instead." #-}

instance Core.FromJSON DescribeAttachment where
  toJSON DescribeAttachment {..} =
    Core.object
      (Core.catMaybes [Core.Just ("attachmentId" Core..= attachmentId)])

instance Core.AWSRequest DescribeAttachment where
  type Rs DescribeAttachment = DescribeAttachmentResponse
  request x@Core.Request {..} =
    Core.Request
      { Core._rqService = Types.mkServiceConfig,
        Core._rqMethod = Request.POST,
        Core._rqPath = Core.rawPath "/",
        Core._rqQuery = Core.mempty,
        Core._rqHeaders =
          Core.pure
            ("X-Amz-Target", "AWSSupport_20130415.DescribeAttachment")
            Core.<> (Core.pure ("Content-Type", "application/x-amz-json-1.1")),
        Core._rqBody = Core.toJSONBody x
      }
  response =
    Response.receiveJSON
      ( \s h x ->
          DescribeAttachmentResponse'
            Core.<$> (x Core..:? "attachment") Core.<*> (Core.pure (Core.fromEnum s))
      )

-- | The content and file name of the attachment returned by the 'DescribeAttachment' operation.
--
-- /See:/ 'mkDescribeAttachmentResponse' smart constructor.
data DescribeAttachmentResponse = DescribeAttachmentResponse'
  { -- | This object includes the attachment content and file name.
    --
    -- In the previous response syntax, the value for the @data@ parameter appears as @blob@ , which is represented as a base64-encoded string. The value for @fileName@ is the name of the attachment, such as @troubleshoot-screenshot.png@ .
    attachment :: Core.Maybe Types.Attachment,
    -- | The response status code.
    responseStatus :: Core.Int
  }
  deriving stock (Core.Eq, Core.Ord, Core.Read, Core.Show, Core.Generic)
  deriving anyclass (Core.Hashable, Core.NFData)

-- | Creates a 'DescribeAttachmentResponse' value with any optional fields omitted.
mkDescribeAttachmentResponse ::
  -- | 'responseStatus'
  Core.Int ->
  DescribeAttachmentResponse
mkDescribeAttachmentResponse responseStatus =
  DescribeAttachmentResponse'
    { attachment = Core.Nothing,
      responseStatus
    }

-- | This object includes the attachment content and file name.
--
-- In the previous response syntax, the value for the @data@ parameter appears as @blob@ , which is represented as a base64-encoded string. The value for @fileName@ is the name of the attachment, such as @troubleshoot-screenshot.png@ .
--
-- /Note:/ Consider using 'attachment' with <https://hackage.haskell.org/package/generic-lens generic-lens> or <https://hackage.haskell.org/package/generic-optics generic-optics> instead.
darrsAttachment :: Lens.Lens' DescribeAttachmentResponse (Core.Maybe Types.Attachment)
darrsAttachment = Lens.field @"attachment"
{-# DEPRECATED darrsAttachment "Use generic-lens or generic-optics with 'attachment' instead." #-}

-- | The response status code.
--
-- /Note:/ Consider using 'responseStatus' with <https://hackage.haskell.org/package/generic-lens generic-lens> or <https://hackage.haskell.org/package/generic-optics generic-optics> instead.
darrsResponseStatus :: Lens.Lens' DescribeAttachmentResponse Core.Int
darrsResponseStatus = Lens.field @"responseStatus"
{-# DEPRECATED darrsResponseStatus "Use generic-lens or generic-optics with 'responseStatus' instead." #-}
